<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>How to begin a script or project in R? | Kenneth Rioja</title> <meta name="author" content="Kenneth Rioja"> <meta name="description" content="Write a snippet with the initial script skeleton!"> <meta name="keywords" content="edtech, video-games, data-analysis, ux"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/deku.png?18252b40067b83902103174aa479784a"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://kennethrioja.github.io/blog/2024/how-to-begin-a-script-or-project-in-r/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Kenneth </span>Rioja</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">How to begin a script or project in R?</h1> <p class="post-meta">May 29, 2024</p> <p class="post-tags"> <a href="/blog/2024"> <i class="fas fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/work"> <i class="fas fa-hashtag fa-sm"></i> work</a>   <a href="/blog/tag/data"> <i class="fas fa-hashtag fa-sm"></i> data</a>   <a href="/blog/tag/code"> <i class="fas fa-hashtag fa-sm"></i> code</a>   </p> </header> <article class="post-content"> <div id="table-of-contents"> <ul id="toc" class="section-nav"> <li class="toc-entry toc-h2"> <a href="#building-your-project-skeleton">Building your project skeleton</a> <ul> <li class="toc-entry toc-h3"><a href="#description">Description</a></li> <li class="toc-entry toc-h3"><a href="#initial-setup">Initial setup</a></li> <li class="toc-entry toc-h3"><a href="#load-environment-or-csv">Load environment or csv</a></li> <li class="toc-entry toc-h3"><a href="#more-headers">More headers!</a></li> <li class="toc-entry toc-h3"><a href="#save">Save</a></li> </ul> </li> <li class="toc-entry toc-h2"><a href="#snippets">Snippets</a></li> </ul> </div> <hr> <div id="markdown-content"> <p>If you have never heard about snippets, it is like an autocompletion that <strong>you</strong> have written in advance. At the end of this blog post, you will be able to write a project skeleton to begin your R project as well as being able to write a snippet. The project skeleton includes packages installation, csv/xlsx import, .csv / .pdf / .RData export.</p> <p>For the advanced people willing to have a hands-on solution, you can directly jump to the <a href="#snippets">end of this article</a> to copy-paste the header snippet.</p> <h2 id="building-your-project-skeleton">Building your project skeleton</h2> <h3 id="description">Description</h3> <p>When I read any kind of script, I like to read about what this script is all about, who wrote it, why and when. In order to do this, you can begin any project with this kind of header (Do not forget to open a new project (Cmd + Shift + N)) :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## /\ ----
## __________________________
## Title:
## Author: NAME SURNAME, INSTITUTION
## Email: johndoe@example.com
## Date Created: 2024-05-29
## __________________________
## Code Outline:
## 1. ...
## 2. ...
## __________________________
## Notes:
##  
## __________________________
</code></pre></div></div> <p>Here you can write more about the specs of your code, maybe the Code Outline is a bit overkill here, it depends on what you want to convey.</p> <h3 id="initial-setup">Initial setup</h3> <p>I love having a structured code and easy to navigate. Like this blog post and its different titles and sub-titles (for example, &lt;h1&gt;, &lt;h2&gt; for HTML), you can do this in R too! Here is the first header I always have in my projects:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Top ----
</code></pre></div></div> <p>Ok, thanks but how does it makes the code easier to navigate? Click on the icon with lines on the top right of the file panel, next to “Source”. Taa-daa! You can now see and click on “Top” to make your cursor in the selected header. Neat!</p> <p>Let’s get into the initial setup now, try to understand the following code :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Clear workspace
rm(list=ls())

## Seed for random number generation
set.seed(42)

## Load packages
# install.packages("pacman")
library(pacman)
pacman::p_load(
# insert packages' name here
  "rstudioapi"
)

## Set working directory to current folder
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
# getwd()
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">rm(list=ls())</code> is used to clear the current environment</p> <p><code class="language-plaintext highlighter-rouge">set.seed(42)</code> was a mystic function when I began coding in R. It affects random generation of numbers, plots in the way that when you run this function before any random generation, it will always create the same value for a random number or the same organisation for a plot. In short, it is necessary when you want to be reproducible when using random generation.</p> <p><code class="language-plaintext highlighter-rouge">p_load()</code> coming from the package <code class="language-plaintext highlighter-rouge">pacman</code> (as we can see by the namespace used before the function, <code class="language-plaintext highlighter-rouge">thisisanamespace::thisisafunction()</code>) allows to <code class="language-plaintext highlighter-rouge">install.packages()</code> and <code class="language-plaintext highlighter-rouge">library()</code> at the same time. You can continue adding packages by writing them in brackets and separated by a coma.</p> <p><code class="language-plaintext highlighter-rouge">setwd(dirname(rstudioapi::getSourceEditorContext()$path))</code> allows to set the working directory to the path of the current project. If you have followed this tutorial and you run this, you can see that it displays an error, this is because you have not saved your project somewhere. Save your project, rerun the line, it works, <em>bravo</em>.<br> If you want to check what your current working directory is, run <code class="language-plaintext highlighter-rouge">getwd()</code>.</p> <h3 id="load-environment-or-csv">Load environment or csv</h3> <p>As easy as it is, here is the code :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Load environment or read .csv files
load(".RData")
df &lt;- read.csv(".csv")
</code></pre></div></div> <h3 id="more-headers">More headers!</h3> <p>Here is how you write more headers :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 1. ... ----

### 1.1 ... ----

#### 1.1.1 ... ----

## 2. ... ----
</code></pre></div></div> <p>You can see your right panel being updated with these new headers!</p> <h3 id="save">Save</h3> <p>At the end of each project you must export something, either a cleaned version of the raw data you have in a .csv format, either a plot that you want to show to your collaborators in .pdf, or a whole .RData environment to begin your analyses in a fresh start. Here is my workflow for each of these steps. Modify it so that is suits your needs !</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Save ----
output_dir = "./output"
proj_name = "projname"
name_raw = paste(output_dir, '/', proj_name, '_', gsub('-','',Sys.Date()), sep='')

dir.create(output_dir, showWarnings = T)

## Save df into a csv
write.csv(df, paste(name_raw, ".csv", sep=''), row.names=FALSE)

## Save a plot into a pdf
pdf(file=paste(name_raw, ".pdf", sep=''), onefile = TRUE)
## Run your ggplot here
dev.off()

rm(output_dir, proj_name, name_raw)

## Save environment
save.image(gsub(" ","",paste("output/environment_mem_",gsub("-","",Sys.Date()),".RData")))
</code></pre></div></div> <h2 id="snippets">Snippets</h2> <p>First go to <em>Edit</em> &gt; <em>Preferences</em>, on the left of the newly displayed window click on <em>Code</em> then on the bottom of the page click on <em>Edit Snippets…</em>. Copy and paste the following code in line 1 of the current window. Make sure to have a line break at the end of the code.</p> <p>Once pasted, click on <em>Save</em> &gt; <em>Apply</em> &gt; <em>OK</em>. Now type <code class="language-plaintext highlighter-rouge">head</code> and you should see an autocompletion suggestion of <code class="language-plaintext highlighter-rouge">header</code> which is a snippet, press <em>Enter</em> and here it is!</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>snippet header
	## __________________________
	## Title:
	## Author: NAME SURNAME, INSTITUTION
	## Email: 
	## Date Created: `r Sys.Date()`
	## __________________________
	## Code Outline:
	## 1. ...
	## 2. ...
	## __________________________
	## Notes:
	##  
	## __________________________
	
	## Top ----
	## clear workspace
	rm(list=ls())

	## Seed for random number generation
	set.seed(42)
	
	## Load packages
	# install.packages("pacman")
	library(pacman)
	pacman::p_load(
	# insert packages' name here
 		"rstudioapi",
		"dplyr"
	)
	
	## Set working directory to current folder
	setwd(dirname(rstudioapi::getSourceEditorContext()$path))
	
	## Load environment or read .csv files
	load("mydata.RData")
	df &lt;- read.csv("")
	
	## 1. ... ----

	### 1.1 ... ----

	#### 1.1.1 ... ----

	## 2. ... ----

	## Save ----
	output_dir = "./output"
	proj_name = "projname"
	name_raw = paste(output_dir, '/', proj_name, '_', gsub('-','',Sys.Date()), sep='')
	
	dir.create(output_dir, showWarnings = T)
	
	# Save df into a csv
	write.csv(df, paste(name_raw, ".csv", sep=''), row.names=FALSE)

	# Save a plot into a pdf
	pdf(file=paste(name_raw, ".pdf", sep=''), onefile = TRUE)
	# run your ggplot here
	dev.off()
	
	rm(output_dir, proj_name, name_raw)

	# Save environment
	save.image(gsub(" ","",paste("output_dir/environment_mem_",gsub("-","",Sys.Date()),".RData")))

</code></pre></div></div> </div> </article> </div> </div> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>